<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Catalogus</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<div class="topbar">
    <div class="topbar-inner">
        <div class="brand">
            <div class="logo"></div>
            <div>
                Art Equipment Rental
                <small>Reservatieplatform â€“ Proof of Concept</small>
            </div>
        </div>
        <div class="nav">
            <a href="/products">Catalogus</a>
            <a href="/cart">Winkelmand</a>
            <a href="/orders">Bestellingen</a>
            <a href="/logout">Logout</a>
        </div>
    </div>
</div>

<div class="container">

    <div class="page-head">
        <div>
            <h1>Catalogus</h1>
            <p>Zoek materiaal per categorie en voeg toe aan je winkelmand.</p>
        </div>
    </div>

    <div class="filters">
        <a class="chip" href="/products">Alle producten</a>
        <a class="chip" th:each="c : ${categories}"
           th:href="@{/products(category=${c.id})}"
           th:text="${c.name}">
        </a>
    </div>

    <div th:if="${#lists.isEmpty(products)}" class="card" style="padding:16px;">
        Geen producten gevonden.
    </div>

    <div class="grid" th:if="${!#lists.isEmpty(products)}">
        <div class="card product" th:each="p : ${products}">
            <img class="product-img"
                 th:src="${p.imageUrl}"
                 alt="Product foto"
                 onerror="this.src='https://images.unsplash.com/photo-1527443154391-507e9dc6c5cc?auto=format&fit=crop&w=1200&q=60'">

            <div class="product-body">
                <h3 th:text="${p.name}">Naam</h3>
                <p th:text="${p.description}">Beschrijving</p>

                <div class="meta">
                    <span class="badge" th:text="${p.category.name}">Categorie</span>

                    <span class="stock ok" th:if="${p.stock >= 6}">Op voorraad</span>
                    <span class="stock low" th:if="${p.stock > 0 and p.stock < 6}">Bijna op</span>
                    <span class="stock out" th:if="${p.stock == 0}">Uitverkocht</span>
                </div>

                <form method="post" action="/cart/add" class="row">
                    <div>
                        <label>Aantal</label>
                        <input type="number" name="quantity" value="1" min="1" th:attr="max=${p.stock}">
                    </div>

                    <div>
                        <input type="hidden" name="productId" th:value="${p.id}">
                        <button type="submit" th:disabled="${p.stock == 0}">Toevoegen</button>
                    </div>
                </form>

                <div class="muted" style="margin-top:10px;">
                    Stock: <strong th:text="${p.stock}"></strong>
                </div>

            </div>
        </div>
    </div>

</div>

</body>
</html>
